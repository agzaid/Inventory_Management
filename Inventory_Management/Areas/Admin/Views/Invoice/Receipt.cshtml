@model Domain.Models.InvoiceVM


<div class="receipt" style="width:280px; margin:auto; font-family:monospace; font-size:12px;">
    <!-- Header -->
    <div class="text-center mb-2">
        <h3 style="margin:0;">Market Now Online</h3>
        <p style="margin:0;"><strong>Invoice #:</strong> @Model.InvoiceNumber</p>
        <p style="margin:0;"><strong>Date:</strong> @Model.CreatedDate</p>
    </div>

    <!-- Customer Info -->
    <div style="margin:5px 0;">
        <p style="margin:0;"><strong>Customer:</strong> @Model.CustomerName</p>
        <p style="margin:0;"><strong>Phone:</strong> @Model.PhoneNumber</p>
        <p style="margin:0;"><strong>Area:</strong> @Model.ListOfAreas.FirstOrDefault(s => s.Value == Model.AreaId.ToString()).Text</p>
        @if (!string.IsNullOrEmpty(Model.ShippingNotes))
        {
            <p style="margin:0;"><strong>Notes:</strong> @Model.ShippingNotes</p>
        }
    </div>

    <!-- Items Table -->
    <table style="width:100%; border-collapse:collapse; font-size:12px;">
        <thead>
            <tr style="border-bottom:1px solid black;">
                <th style="text-align:left;">#</th>
                <th style="text-align:left;">Product</th>
                <th style="text-align:right;">Qty</th>
                <th style="text-align:right;">Price</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.ListOfProductsVMs.Count; i++)
            {
                <tr>
                    <td>@(i + 1)</td>
                    <td>@Model.ListOfProductsVMs[i].ProductName</td>
                    <td style="text-align:right;">@Model.quantityInput[i]</td>
                    <td style="text-align:right;">@Model.ListOfProductsVMs[i].SellingPrice</td>
                </tr>
            }
        </tbody>
    </table>

    <!-- Totals -->
    <div style="margin-top:10px; text-align:right;">
        <p><strong>Subtotal:</strong> @Model.TotalAmount</p>
        <p><strong>Shipping:</strong> @(Model.shippingInput ?? 0)</p>
        <p><strong>Grand Total:</strong> @Model.grandTotalInput</p>
    </div>

    <!-- Footer -->
    <div class="text-center" style="margin-top:10px;">
        <p>Thank you for your purchase 🙏</p>
    </div>
</div>
<div style="page-break-after: always;"></div>

<div class="text-center" style="margin:15px 0;">
    <button onclick="window.print()" 
            style="padding:8px 16px; background:#3b71ca; color:white; border:none; border-radius:4px; cursor:pointer;">
        🖨️ Print Receipt
    </button>
</div>

<style>
    @@media print {
        body * {
            visibility: hidden;
        }

        .receipt, .receipt * {
            visibility: visible;
        }

        .receipt {
            display: inline-block;
            width: 80mm;
            max-height: 100%;
            overflow: hidden;
        }
        /* Remove navbar/sidebar for print */
        .navbar, .sidebar, footer {
            display: none !important;
        }
    }
</style>
