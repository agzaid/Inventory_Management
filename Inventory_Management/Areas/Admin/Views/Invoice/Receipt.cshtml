@model Domain.Models.InvoiceVM

<div class="receipt p-4 border rounded" style="max-width:600px; margin:auto; font-family:Arial, sans-serif;">
    <!-- Header -->
    <div class="text-center mb-3">
        <h2>Your Shop Name</h2>
        <p><strong>Invoice #:</strong> @Model.InvoiceNumber</p>
        <p><strong>Date:</strong> @Model.CreatedDate</p>
    </div>

    <!-- Customer Info -->
    <div class="mb-3">
        <p><strong>Customer:</strong> @Model.CustomerName</p>
        <p><strong>Phone:</strong> @Model.PhoneNumber</p>
        @if (!string.IsNullOrEmpty(Model.ShippingNotes))
        {
            <p><strong>Notes:</strong> @Model.ShippingNotes</p>
        }
    </div>

    <!-- Items Table -->
    <table class="table table-sm table-bordered">
        <thead class="table-light">
            <tr>
                <th>Item</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Discount</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.ListInvoiceItemVMs != null)
            {
                foreach (var item in Model.ListInvoiceItemVMs)
                {
                    var discount =  (decimal)(item.IndividualDiscount);
                    var total = (item.Quantity ?? 0) * (item.PriceSoldToCustomer ?? 0m) - discount;

                    <tr>
                        <td>@item.ProductName</td>
                        <td>@item.Quantity</td>
                        <td>@(item.PriceSoldToCustomer?.ToString("C"))</td>
                        <td>@(discount.ToString("C"))</td>
                        <td>@total.ToString("C")</td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <!-- Totals -->
    <div class="mt-3 text-end">
        <p><strong>Subtotal:</strong> @Model.TotalAmount?.ToString("C")</p>
        <p><strong>Shipping:</strong> @(Model.shippingInput?.ToString("C") ?? "0.00")</p>
        <p><strong>Grand Total:</strong> @Model.grandTotalInput?.ToString("C")</p>
    </div>

    <!-- Footer -->
    <div class="text-center mt-4">
        <p>Thank you for your purchase 🙏</p>
    </div>
</div>

<!-- Print Styling -->
<style>
    @@media print {
        body *

    {
        visibility: hidden;
    }

    .receipt, .receipt * {
        visibility: visible;
    }

    .receipt {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
    }

    }
</style>
